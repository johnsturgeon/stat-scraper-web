{% extends "base_layout.j2" %}
{% block includes %}
    <script src="{{ url_for('static', path="mmr_chart.js") }}"></script>
{% endblock includes %}
{% block section1 %}

    <div class="rounded-lg bg-gradient-to-bk from-blue-700/40 to-orange-700/40 p-4 text-white">
        {% for result in games %}
            <div>Ending MMR: {{ result.primary_player_ending_mmr | int }}</div>
        {% endfor %}
    </div>
    <div>
        <canvas id="myChart"></canvas>
    </div>
    <script>
        const ctx = document.getElementById('myChart');
        let myChart = newMMRChart(ctx)
        function fetchMMRData() {
            fetchMMRChartData("{{ url_for('get_todays_mmr') }}")
        }
        fetchMMRData()
        window.addEventListener('load', function () {
            const fetchInterval = 1000
            setInterval(fetchMMRData, fetchInterval)
        })
    </script>

{% endblock %}